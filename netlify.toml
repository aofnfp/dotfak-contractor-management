[build]
  command = "cd frontend && npm install && npm run build"
  publish = "frontend/.next"

[build.environment]
  NEXT_PUBLIC_API_URL = "/api"
  NEXT_PUBLIC_APP_NAME = "DotFak Contractor Management"
  NODE_VERSION = "20"

[[plugins]]
  package = "@netlify/plugin-nextjs"

# Proxy API requests to Coolify backend (solves HTTPS mixed content)
[[redirects]]
  from = "/api/*"
  to = "http://q0c480kc0gcokkkk8ksggoso.172.190.9.72.sslip.io/:splat"
  status = 200
  force = true
